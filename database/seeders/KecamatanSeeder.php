<?php

namespace Database\Seeders;

use App\Models\Kecamatan;
use Illuminate\Database\Seeder;

class KecamatanSeeder extends Seeder
{
    private function normalizeWilayah(string $wilayah): string
    {
        $w = strtolower(trim($wilayah));

        return match ($w) {
            'timur', 'surabaya timur'   => 'Surabaya Timur',
            'barat', 'surabaya barat'   => 'Surabaya Barat',
            'utara', 'surabaya utara'   => 'Surabaya Utara',
            'selatan', 'surabaya selatan' => 'Surabaya Selatan',

            // accept both "pusat" and "tengah", but store as your enum: Surabaya Tengah
            'pusat', 'surabaya pusat', 'tengah', 'surabaya tengah' => 'Surabaya Tengah',

            default => $wilayah, // will fail fast if you pass something unexpected
        };
    }
    public function run(): void
    {
        // Your Polygon rings are huge; store them as JSON strings then decode
        $keputihRingJson = <<<'JSON'
[[112.76195293611454,-7.30618067419212],[112.76825846894019,-7.307851476179863],[112.7789487900883,-7.310654035662239],[112.77918795224025,-7.310467982326131],[112.77961703727732,-7.310537752335378],[112.78039314190664,-7.310528449667913],[112.78070090687811,-7.310506494208994],[112.78076655927322,-7.310499517198281],[112.7863897994531,-7.3087734599108956],[112.78994179927446,-7.307685252371854],[112.790870311157,-7.307485243703027],[112.791780065225,-7.307366633869364],[112.7919043380881,-7.307352679755908],[112.79249286456076,-7.307382913639415],[112.79402631600357,-7.3076271103126516],[112.79668269175829,-7.307791794531539],[112.79910014429407,-7.307712719635035],[112.80025394740284,-7.307675508525847],[112.80136534798953,-7.307510385093124],[112.80286648966955,-7.307326602526402],[112.80430380730701,-7.30763591832978],[112.80611322113822,-7.308490803251573],[112.80668064506796,-7.308616389817374],[112.8070539168719,-7.308573379770252],[112.80766120115908,-7.308398953957493],[112.80805277056567,-7.308154757704713],[112.80829427763268,-7.30778962586173],[112.80837488909458,-7.307346452951563],[112.80833033926609,-7.3069882975484575],[112.80803724839473,-7.306583628122567],[112.80746513501094,-7.306199889535421],[112.80651862275516,-7.305212493159601],[112.80595557686166,-7.304444249564057],[112.8057359570048,-7.303728251148229],[112.8056994544196,-7.303067618526214],[112.8059954269691,-7.302035473909186],[112.80641319981265,-7.301229850617119],[112.80793549655664,-7.29952777280279],[112.80876677748205,-7.2989809028016595],[112.80964466406465,-7.2986478707818065],[112.8102216456835,-7.298599118735922],[112.81117900777707,-7.298698742476319],[112.81140713123563,-7.298716452859395],[112.81213396836597,-7.298972930876246],[112.81279965772183,-7.2995686555890416],[112.81343647447198,-7.3000455765130425],[112.81495520066971,-7.300705453719516],[112.8158634124768,-7.301099707383926],[112.81731234697139,-7.3017167780796655],[112.81789787646619,-7.302246687639695],[112.81868852605629,-7.302956027019917],[112.81928046645794,-7.303490174373437],[112.81972281903279,-7.304075192171581],[112.82029321372141,-7.304820143025964],[112.82083600383669,-7.305549293356421],[112.82105183770182,-7.305835442144328],[112.82166010461282,-7.3064561229443825],[112.82258113823383,-7.306742271151663],[112.82458319949848,-7.306851311901838],[112.82549995918157,-7.306946694573995],[112.82580862206919,-7.306978015487019],[112.82736433547132,-7.307336230202083],[112.82848197023651,-7.3075863444486515],[112.8297299558559,-7.307864013039492],[112.83116386202778,-7.308162877997674],[112.83272384173341,-7.308497775113452],[112.83392695525754,-7.308756367134421],[112.83532747477193,-7.309053510834687],[112.8364130550039,-7.309324820154615],[112.83725318558356,-7.309534316715656],[112.83826824585276,-7.309852256970316],[112.83880676203012,-7.310013346610333],[112.83921712864708,-7.31004090018196],[112.83948211279841,-7.309981551378442],[112.83979624723491,-7.309854375341615],[112.84010662674689,-7.309532584839289],[112.84040580240054,-7.309093826922037],[112.84073703258878,-7.308508815693926],[112.84122816030407,-7.30739950523791],[112.84174307709435,-7.306727801665417],[112.84284487952891,-7.305697303460306],[112.84308238648498,-7.3055549745631225],[112.84317639972483,-7.305417553478463],[112.84359698495933,-7.305123079661911],[112.8451545788563,-7.303392039862175],[112.84542163494655,-7.302854124131841],[112.84552372197925,-7.3018077807895025],[112.84598311362964,-7.300980830285738],[112.84620430220212,-7.300272014351819],[112.84617027319075,-7.299900729366641],[112.84603415663065,-7.299310048249211],[112.84528451237452,-7.299158158763433],[112.84531854138584,-7.298921885946996],[112.84593106358591,-7.298415586635585],[112.84605016512432,-7.298196190088973],[112.8459140490803,-7.297453616364393],[112.84613523765267,-7.295749067471576],[112.84630538422533,-7.2949569555048726],[112.84599089587397,-7.292383420304702],[112.84651504323483,-7.288432105122766],[112.84648883594105,-7.287854863546869],[112.8466460801177,-7.28681503663536],[112.84627917704074,-7.285905186108224],[112.84138984219027,-7.287257108204486],[112.84159170915746,-7.280370869963832],[112.83646979547791,-7.281039080576534],[112.83599808146363,-7.283044812683968],[112.83438039243464,-7.283044812683968],[112.83377375904831,-7.2815738925475415],[112.83249308856688,-7.282175633186412],[112.8222463651723,-7.27185070481093],[112.81876059613728,-7.272245874022104],[112.81656954131608,-7.2734313795696295],[112.81501749646515,-7.276221438270582],[112.81407760762556,-7.277313583229727],[112.8131914267181,-7.278565551008967],[112.8123858077098,-7.279977340271643],[112.81179502043813,-7.281042838659204],[112.81031805225905,-7.281868598167719],[112.80865310631236,-7.282561169487181],[112.80739096986787,-7.283466838059169],[112.8066122048267,-7.284212681391594],[112.80438332557537,-7.2848519746880385],[112.80381939227084,-7.285171620994859],[112.80277208756092,-7.285011797869956],[112.80226788123616,-7.284936865140267],[112.80165978501316,-7.284711072949264],[112.80059642958486,-7.284614304833127],[112.80139097494464,-7.2822901886976865],[112.80139097494464,-7.28062830917132],[112.80108421326679,-7.280675122763711],[112.80068306337995,-7.27884938905234],[112.79952680782753,-7.274729757482504],[112.79905486678388,-7.274776571690353],[112.79867731395109,-7.274448872134528],[112.79822896995302,-7.274519093761469],[112.79792903381991,-7.2748928723367925],[112.7975028097377,-7.27486591203845],[112.79051808192082,-7.276363963650439],[112.79016412614027,-7.276785289808501],[112.79040009666124,-7.278845100884823],[112.79082484359856,-7.2789855422047935],[112.79084844068421,-7.279545334067137],[112.79042369374685,-7.279802809384748],[112.79023491733051,-7.279943250404855],[112.79035290259009,-7.280317759576576],[112.78962139397498,-7.287620625899109],[112.78933821226127,-7.290429354770637],[112.79033852050486,-7.280625256926129],[112.79022317144438,-7.279976881891642],[112.79076146705722,-7.279404785495174],[112.79091526580311,-7.278947107851977],[112.7904923192508,-7.278756408696452],[112.79026162113126,-7.276773132671195],[112.79010782238538,-7.275895911632986],[112.78091834729196,-7.27765035199441],[112.76195293611454,-7.30618067419212]]
JSON;

        $rungkutRingJson = <<<'JSON'
[[112.77111650607083,-7.308629597418033],[112.77068952007727,-7.310245648590538],[112.76964899351975,-7.310187503862451],[112.7685938116586,-7.310652661472233],[112.76720155781408,-7.310594516798162],[112.75768214017825,-7.330437643912745],[112.76420241427456,-7.3310225906887325],[112.76449476004217,-7.331112432218177],[112.76520296259247,-7.331349867603606],[112.76585674371836,-7.331608794379889],[112.76636744752938,-7.331840293625291],[112.76698188805022,-7.331964947014697],[112.76725120451329,-7.331881844759337],[112.76782605921676,-7.331795188264039],[112.76835671239564,-7.331233258207149],[112.76875769468307,-7.331239194091779],[112.7735199888237,-7.331337770865034],[112.78130146565348,-7.3316791260384235],[112.78768961768247,-7.331986603176347],[112.79188326609835,-7.333087114830576],[112.79366184219981,-7.333265136065123],[112.79526908757606,-7.333394606008881],[112.79708845670768,-7.333151849832376],[112.8002915562459,-7.332693796371487],[112.80462377601657,-7.3320221695707914],[112.80549674685523,-7.331674217938243],[112.80665527216411,-7.331407186476312],[112.80988130738092,-7.331027056438799],[112.81851859823911,-7.3307183469537165],[112.82163113548393,-7.330255282325609],[112.82373209812579,-7.3309884677646835],[112.82591087419786,-7.330641169548599],[112.82668900850871,-7.332454835020101],[112.83046295991983,-7.335117436902124],[112.83271325652447,-7.331240978017291],[112.83497492410737,-7.324062749057276],[112.83780265501036,-7.321925917879113],[112.83821440486821,-7.321647173811485],[112.83879608323764,-7.321595314430468],[112.83910339248678,-7.32147214837471],[112.83960330767235,-7.321047748882563],[112.83966212907893,-7.320781969135766],[112.83964905765481,-7.320483777036031],[112.83988434328899,-7.319679953861609],[112.84011962892129,-7.319336383836514],[112.84049216450478,-7.319005778468281],[112.84082093820587,-7.318904932536995],[112.84120026300587,-7.318958192191374],[112.84142901292796,-7.318899850036573],[112.84143554863806,-7.3187766832380845],[112.84104340591836,-7.318478489797755],[112.84106301305451,-7.318329393003822],[112.8414159415039,-7.317882102320112],[112.8425858339549,-7.316669877488067],[112.84302372665906,-7.31600218005066],[112.84313027447558,-7.314875862652315],[112.84323484587333,-7.314020169114457],[112.84371195284984,-7.313780315328529],[112.84430538465847,-7.313153223181814],[112.84424002753985,-7.312414212370427],[112.84393284907497,-7.312018776257744],[112.84445664786688,-7.31181633602074],[112.84417485702625,-7.311544378159596],[112.84443628522342,-7.311194319032708],[112.84439053523903,-7.3108442598962995],[112.84459314231088,-7.310442339809441],[112.84435132096661,-7.309852424187795],[112.84478267795868,-7.309554224785899],[112.84537587636635,-7.3082543910735325],[112.84551966203168,-7.307184758034936],[112.84569612634277,-7.305998434742705],[112.84512098368538,-7.305149206858033],[112.84477459094808,-7.305389065278774],[112.84463734099677,-7.305214033470463],[112.8436112342091,-7.305810437868786],[112.84227794895855,-7.306854143650696],[112.84165052060456,-7.307645024669625],[112.84113482232357,-7.308866646667539],[112.84047471545273,-7.309866910921016],[112.84001055571184,-7.310297624855963],[112.83929162738906,-7.310518032762332],[112.83852694908387,-7.310492102425954],[112.83519373595436,-7.309351166141823],[112.82587298902257,-7.307342011779554],[112.82484688223684,-7.3072512549512965],[112.82300109440632,-7.307240588796944],[112.82185080909142,-7.306981283464722],[112.82073973804893,-7.3062033665651995],[112.81856827537331,-7.303380460760778],[112.8170062402005,-7.302025577037753],[112.8157499018804,-7.301354044562146],[112.81353818660727,-7.300528384422336],[112.81176700865052,-7.2993225952455845],[112.81088468752824,-7.298991975064567],[112.81025092277628,-7.29898740348014],[112.80902874462868,-7.299272644437735],[112.80791113787416,-7.300063538868301],[112.80630988842904,-7.302131526713978],[112.8061007460542,-7.303039103258541],[112.80619350794893,-7.303854445838226],[112.80650722213204,-7.304664780205371],[112.8072915075735,-7.305507526353921],[112.80799736012358,-7.30612337464801],[112.80845485996593,-7.306590125034418],[112.80864200438691,-7.307069907718159],[112.80866691141176,-7.307675252769286],[112.8084320811522,-7.308135217731348],[112.80798765256293,-7.308595483406265],[112.80732100993862,-7.308945544305104],[112.80671318872095,-7.309055748605047],[112.80612497463937,-7.30893257909149],[112.80525572494116,-7.308589000794413],[112.80422119936128,-7.308037668127454],[112.80351534246256,-7.307804293750763],[112.80249189673663,-7.307700312310033],[112.80060307592754,-7.307998512972489],[112.79771427941415,-7.308134655020368],[112.79724370814978,-7.308082794069335],[112.79671431547678,-7.308154102875449],[112.79557208191272,-7.308107258799339],[112.79391854677311,-7.307919262813726],[112.7924545472813,-7.307621062121299],[112.79086133932407,-7.307724782070309],[112.78922087560858,-7.3081591176942595],[112.7813672362646,-7.310750089657674],[112.78082477182761,-7.310938084415227],[112.78044297856741,-7.310963341733256],[112.78000508586126,-7.311002237196206],[112.77952144317271,-7.310995754619313],[112.77814894364775,-7.310729968886108],[112.77720126540669,-7.310470665579331],[112.77717512255856,-7.310224327297661],[112.77111650607083,-7.308629597418033]]
JSON;

        $keputihRing = json_decode($keputihRingJson, true);
        $rungkutRing  = json_decode($rungkutRingJson, true);

        $kecamatanData = [
            [
                'NamaKecamatan' => 'Keputih',
                'Wilayah' => 'Surabaya Timur',
                'PolygonJSON' => json_encode([
                    'type' => 'Polygon',
                    'coordinates' => [$keputihRing]
                ], JSON_UNESCAPED_SLASHES),
            ],
            [
                'NamaKecamatan' => 'Rungkut',
                'Wilayah' => 'Surabaya Timur',
                'PolygonJSON' => json_encode([
                    'type' => 'Polygon',
                    'coordinates' => [$rungkutRing]
                ], JSON_UNESCAPED_SLASHES),
            ],

            // examples (add the rest you need)
            ['NamaKecamatan' => 'Genteng', 'Wilayah' => 'Tengah'],
            ['NamaKecamatan' => 'Wiyung', 'Wilayah' => 'Barat'],
            ['NamaKecamatan' => 'Sawahan', 'Wilayah' => 'Barat'],
            ['NamaKecamatan' => 'Tenggilis Mejoyo', 'Wilayah' => 'Selatan'],
            ['NamaKecamatan' => 'Gayungan', 'Wilayah' => 'Selatan'],
            ['NamaKecamatan' => 'Krembangan', 'Wilayah' => 'Utara'],
            ['NamaKecamatan' => 'Pabean Cantikan', 'Wilayah' => 'Utara'],
        ];

        foreach ($kecamatanData as $k) {
            Kecamatan::updateOrCreate(
                ['NamaKecamatan' => $k['NamaKecamatan']],
                [
                    'Wilayah'     => $this->normalizeWilayah($k['Wilayah']),
                    'PolygonJSON' => $k['PolygonJSON'] ?? null,
                ]
            );
        }
    }
}
